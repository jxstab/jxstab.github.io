<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>StabFX Ultimate</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link rel="stylesheet" href="style.css">
</head>
<body class="dark-theme bg-default">

<!-- LOADER -->
<div id="loader-overlay">
    <div class="loader-content">
        <h1 data-translate-key="loader_welcome">StabFX Ultimate</h1>
        <p data-translate-key="loader_support">–°–∏–º—É–ª—è—Ç–æ—Ä —Å—Ç–∞–±–∏–ª–∏–∑–∞—Ü–∏–∏ –∫–∏–Ω–µ–º–∞—Ç–æ–≥—Ä–∞—Ñ–∏—á–µ—Å–∫–æ–≥–æ —É—Ä–æ–≤–Ω—è</p>
        <p style="font-size: 0.85rem; opacity: 0.5; margin-top: 8px;" data-translate-key="loader_reactions">100 Reactions = New Update</p>
        <a href="https://t.me/jeliktontech" target="_blank" class="tg-link">
            <i class="fab fa-telegram-plane"></i> @jeliktontech
        </a>
        <br>
        <button id="enter-site-btn" data-translate-key="loader_enter">–í–æ–π—Ç–∏ –≤ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ</button>
    </div>
</div>

<!-- UI HEADER -->
<header class="app-header">
    <div class="header-left">
        <button id="menu-btn" class="icon-btn" title="–ú–µ–Ω—é"><i class="fas fa-bars"></i></button>
        <button id="auto-spin-btn" class="icon-btn" title="–ë–µ—Å–∫–æ–Ω–µ—á–Ω–æ–µ –≤—Ä–∞—â–µ–Ω–∏–µ"><i class="fas fa-sync-alt"></i></button>
        <button id="photo-mode-btn" class="icon-btn" title="Photo Mode"><i class="fas fa-camera-retro"></i></button>
        <a href="https://t.me/jxstab_bot" target="_blank" class="icon-btn" title="Add Phone"><i class="fas fa-plus-circle"></i></a>
    </div>
    <span id="fps-counter">60 FPS</span>
</header>

<div id="donation-bar">
    <span class="card-number">üí≥ 2200 7021 0579 3918</span>
    <span data-translate-key="donation_text" class="donate-text">–ü–æ–¥–¥–µ—Ä–∂–∞—Ç—å —Ä–∞–∑—Ä–∞–±–æ—Ç–∫—É</span>
</div>

<!-- HUD (Viewfinder) -->
<div id="camera-viewfinder" class="hidden">
    <div class="viewfinder-world" id="viewfinder-horizon" style="width:200%; height:200%; position:absolute; left:-50%; top:-50%; background:linear-gradient(#0A84FF 50%, #333 50%); opacity:0.8;"></div>
    <div class="viewfinder-ui" style="position:absolute; inset:5px; border:1px solid rgba(255,255,255,0.3); border-radius:8px;"></div>
    <span style="position:absolute; bottom:5px; left:8px; font-size:9px; color:var(--danger-color); font-weight:bold;">REC ‚óè</span>
    <span style="position:absolute; top:5px; right:8px; font-size:9px; color:var(--accent-color); font-weight:bold;">OIS ON</span>
</div>

<!-- PHOTO MODE CARD OVERLAY -->
<div id="photo-card-overlay" class="hidden">
    <div class="glass-photo-card">
        <h1 id="pc-nick">USER</h1>
        <h3 id="pc-phone">PHONE MODEL</h3>
        <div class="pc-specs">
            <span><i class="fas fa-microchip"></i> <span id="pc-cpu">CPU</span></span>
            <span><i class="fas fa-camera"></i> <span id="pc-cam">CAM</span></span>
        </div>
        <div class="pc-watermark">STABFX BY JELIKTON</div>
    </div>
    <button id="photo-exit-btn"><i class="fas fa-times"></i></button>
</div>

<!-- MAIN SCENE -->
<div class="app-layout">
    <div id="wrapper-bg" class="stabilization-wrapper">
        <div id="tsparticles"></div>
        <div id="white-fire-effect"></div>
        <div id="phone-container">
            <img id="phone-image" src="" alt="Phone" draggable="false">
        </div>
        
        <div id="phone-info-container" class="hidden">
            <div class="info-item">
                <i class="fas fa-microchip"></i>
                <div class="info-text">
                    <strong data-translate-key="processor_title">–ü—Ä–æ—Ü–µ—Å—Å–æ—Ä</strong>
                    <p id="phone-processor-info">N/A</p>
                </div>
            </div>
            <div class="info-item">
                <i class="fas fa-camera"></i>
                <div class="info-text">
                    <strong data-translate-key="camera_title">–ö–∞–º–µ—Ä–∞</strong>
                    <p id="phone-camera-info">N/A</p>
                </div>
            </div>
        </div>

        <div id="floating-joystick" class="hidden">
            <div id="joystick-base"></div>
            <div id="joystick-handle"></div>
        </div>
    </div>
</div>

<!-- MAIN MENU MODAL -->
<div id="main-menu-modal" class="modal-overlay hidden">
    <div class="modal-content">
        <h2 data-translate-key="controls_title">–ü–∞–Ω–µ–ª—å –£–ø—Ä–∞–≤–ª–µ–Ω–∏—è</h2>
        
        <div class="menu-grid">
            <!-- Device Select -->
            <div class="control-group">
                <label for="phone-select" data-translate-key="phone_model_label">–£—Å—Ç—Ä–æ–π—Å—Ç–≤–æ</label>
                <select id="phone-select"></select>
            </div>

            <!-- Propeller Card -->
            <div class="propeller-card">
                <div class="prop-header">
                    <span class="prop-label" data-translate-key="turbo_title"><i class="fas fa-fan"></i> Turbo Propeller</span>
                    <button id="propeller-settings-toggle" class="prop-settings-btn"><i class="fas fa-sliders-h" style="font-size:0.8rem;"></i></button>
                </div>
                <button id="propeller-btn" class="btn-prop-launch" data-translate-key="launch_btn">–ó–ê–ü–£–°–¢–ò–¢–¨</button>
                
                <!-- Hidden Settings -->
                <div id="propeller-settings-panel" class="prop-settings-panel hidden">
                    <div class="prop-input-wrap">
                        <span>Time (s)</span>
                        <input type="number" id="propeller-time" value="5" min="1" max="60">
                    </div>
                    <div class="prop-input-wrap">
                        <span>Power</span>
                        <input type="range" id="propeller-power" min="1" max="50" value="25" style="width:100%">
                    </div>
                </div>
            </div>

            <!-- Action Grid -->
            <div class="btn-grid-row">
                <button id="fx-panel-btn" class="menu-action-btn"><i class="fas fa-wand-magic-sparkles"></i> FX Studio</button>
                <button id="music-toggle-btn" class="menu-action-btn"><i class="fas fa-music"></i> <span data-translate-key="music_toggle_text">Music</span></button>
            </div>

            <div class="btn-grid-row">
                <button id="info-btn" class="menu-action-btn"><i class="fas fa-info-circle"></i> <span data-translate-key="info_button_text">Info</span></button>
                <button id="settings-btn" class="menu-action-btn"><i class="fas fa-cog"></i> <span data-translate-key="settings_button_text">Settings</span></button>
            </div>
            
            <a href="https://t.me/jxstab_bot" target="_blank" class="menu-action-btn btn-blue" id="support-button">
                <i class="fab fa-telegram"></i> <span data-translate-key="support_button_text">–î–æ–±–∞–≤–∏—Ç—å –≤–∞—à —Ç–µ–ª–µ—Ñ–æ–Ω</span>
            </a>

            <button class="menu-action-btn btn-close modal-close-btn" data-translate-key="close_button">–ó–∞–∫—Ä—ã—Ç—å</button>
        </div>
    </div>
</div>

<!-- PHOTO MODE MODAL -->
<div id="photo-modal" class="modal-overlay hidden">
    <div class="modal-content">
        <h3 data-translate-key="photo_mode_title">–§–æ—Ç–æ –†–µ–∂–∏–º</h3>
        <p style="text-align:center; color:#888; font-size:0.8rem; margin-bottom:15px;" data-translate-key="photo_mode_desc">–°–æ–∑–¥–∞—Ç—å –∫—Ä–∞—Å–∏–≤—ã–π —Å–∫—Ä–∏–Ω—à–æ—Ç</p>
        
        <div class="control-group">
            <label data-translate-key="photo_nick_label">–¢–≤–æ–π –ù–∏–∫–Ω–µ–π–º</label>
            <input type="text" id="photo-nick-input" placeholder="–í–≤–µ–¥–∏—Ç–µ –∏–º—è..." style="width:100%; padding:10px; border-radius:10px; border:1px solid #444; background:#222; color:white;">
        </div>

        <button id="generate-photo-btn" class="menu-action-btn btn-blue" style="margin-top:15px;" data-translate-key="photo_generate">–°–æ–∑–¥–∞—Ç—å –í–∏–¥</button>
        <button class="menu-action-btn btn-close modal-close-btn" data-translate-key="close_button">–û—Ç–º–µ–Ω–∞</button>
    </div>
</div>

<!-- MUSIC MODAL -->
<div id="music-modal" class="modal-overlay hidden">
    <div class="modal-content">
        <h3 data-translate-key="music_toggle_text">–ú—É–∑—ã–∫–∞</h3>
        <div class="menu-grid">
            <button class="menu-action-btn music-track-btn" data-src="UNDER_YOUR_SPELL.mp3"><i class="fas fa-play"></i> UNDER YOUR SPELL</button>
            <button class="menu-action-btn music-track-btn" data-src="REVOLTA_DO_CHAPEU.mp3"><i class="fas fa-play"></i> REVOLTA DO CHAPEU</button>
            <button class="menu-action-btn btn-close modal-close-btn" data-translate-key="close_button">–ó–∞–∫—Ä—ã—Ç—å</button>
        </div>
    </div>
</div>

<!-- FX STUDIO MODAL -->
<div id="fx-modal" class="modal-overlay hidden">
    <div class="modal-content">
        <h3 data-translate-key="fx_title">FX Studio</h3>
        <div class="fx-grid">
            <div class="fx-btn active" data-fx="none"><i class="fas fa-ban"></i><span>–ù–µ—Ç</span></div>
            <div class="fx-btn" data-fx="snow"><i class="fas fa-snowflake"></i><span>–°–Ω–µ–≥</span></div>
            <div class="fx-btn" data-fx="text"><i class="fas fa-font"></i><span>JX Text</span></div>
            <div class="fx-btn" data-fx="phones"><i class="fas fa-mobile-alt"></i><span>–¢–µ–ª–µ—Ñ–æ–Ω—ã</span></div>
            <div class="fx-btn" data-fx="mix" style="grid-column: span 2;"><i class="fas fa-layer-group"></i><span>Mix</span></div>
        </div>
        <div class="setting-item" style="margin-top:20px;">
            <span data-translate-key="settings_white_fire">Rage Glow (–û–≥–æ–Ω—å)</span>
            <label class="toggle-switch"><input type="checkbox" id="white-fire-toggle"><span class="slider"></span></label>
        </div>
        <button class="menu-action-btn btn-close modal-close-btn" data-translate-key="close_button">–ì–æ—Ç–æ–≤–æ</button>
    </div>
</div>

<!-- SETTINGS MODAL -->
<div id="settings-modal" class="modal-overlay hidden">
    <div class="modal-content">
        <h3 data-translate-key="settings_title">–ù–∞—Å—Ç—Ä–æ–π–∫–∏</h3>
        
        <div class="control-group">
            <label>–§–æ–Ω</label>
            <select id="bg-select">
                <option value="bg-default">Absolute Black</option>
                <option value="bg-neon">Cyberpunk Neon</option>
                <option value="bg-space">Deep Space</option>
                <option value="bg-matrix">Matrix Code</option>
                <option value="bg-sunset">Sunset Vibes</option>
                <option value="bg-carbon">Carbon Fiber</option>
                <option value="bg-blueprint">Blueprint</option>
                <option value="bg-wood">Dark Wood</option>
                <option value="bg-hex">Hexagon Tech</option>
                <option value="bg-gradient">Aura Gradient</option>
            </select>
        </div>

        <!-- NEW STRETCH SLIDER -->
        <div class="control-group" style="margin-top:15px;">
            <label data-translate-key="settings_stretch">–†–∞—Å—Ç—è–∂–µ–Ω–∏–µ (–®–∏—Ä–∏–Ω–∞)</label>
            <input type="range" id="stretch-input" min="0.5" max="2.0" step="0.1" value="1.0" style="width:100%">
        </div>

        <!-- NEW FPS SELECTOR -->
        <div class="control-group" style="margin-top:10px;">
            <label data-translate-key="settings_fps">FPS (–ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å)</label>
            <select id="fps-input">
                <option value="30">30 FPS (Low)</option>
                <option value="60" selected>60 FPS (Normal)</option>
                <option value="120">120 FPS (High)</option>
            </select>
        </div>

        <div style="margin-top:15px;">
            <div class="setting-item">
                <span data-translate-key="settings_light_theme">–°–≤–µ—Ç–ª–∞—è —Ç–µ–º–∞</span>
                <label class="toggle-switch"><input type="checkbox" id="light-theme-toggle"><span class="slider"></span></label>
            </div>
            <div class="setting-item">
                <span>HUD –ö–∞–º–µ—Ä—ã</span>
                <label class="toggle-switch"><input type="checkbox" id="viewfinder-toggle"><span class="slider"></span></label>
            </div>
            <div class="setting-item">
                <span data-translate-key="settings_shadows">3D –¢–µ–Ω–∏</span>
                <label class="toggle-switch"><input type="checkbox" id="shadows-toggle"><span class="slider"></span></label>
            </div>
            <div class="setting-item">
                <span data-translate-key="settings_stabilization">–°—Ç–∞–±–∏–ª–∏–∑–∞—Ü–∏—è (OIS)</span>
                <label class="toggle-switch"><input type="checkbox" id="stabilization-toggle"><span class="slider"></span></label>
            </div>
            <div class="setting-item">
                <span data-translate-key="settings_super_fps">FPS Boost (Lite Mode)</span>
                <label class="toggle-switch"><input type="checkbox" id="super-fps-boost-toggle"><span class="slider"></span></label>
            </div>
        </div>
        
        <button class="menu-action-btn btn-close modal-close-btn" data-translate-key="close_button">–ù–∞–∑–∞–¥</button>
    </div>
</div>

<!-- LANGUAGE MODAL -->
<div id="language-modal" class="modal-overlay hidden">
    <div class="modal-content">
        <h3 data-translate-key="language_modal_title">–Ø–∑—ã–∫ / Language</h3>
        <div class="btn-grid-row" style="grid-template-columns: 1fr;">
            <button class="menu-action-btn btn-blue lang-btn" data-lang="ru">–†—É—Å—Å–∫–∏–π</button>
            <button class="menu-action-btn lang-btn" data-lang="en">English</button>
        </div>
    </div>
</div>

<!-- INFO MODAL -->
<div id="info-modal" class="modal-overlay hidden">
    <div class="modal-content">
        <h3 data-translate-key="info_title">–û –ü—Ä–æ–µ–∫—Ç–µ</h3>
        <div style="background:rgba(255,255,255,0.05); padding:15px; border-radius:14px; margin-bottom:15px;">
            <p style="margin-bottom:8px; font-weight:700; color:var(--text-secondary);" data-translate-key="info_development_title">–†–∞–∑—Ä–∞–±–æ—Ç–∫–∞</p>
            <p><i class="fas fa-code" style="color:var(--accent-color); width:20px;"></i> @jelikton</p>
            <p><i class="fas fa-search" style="color:var(--accent-color); width:20px;"></i> @romafacti1</p>
        </div>
        <a href="https://t.me/jeliktontech" target="_blank" class="menu-action-btn btn-blue">Telegram Channel</a>
        <button class="menu-action-btn btn-close modal-close-btn" data-translate-key="close_button">–ó–∞–∫—Ä—ã—Ç—å</button>
    </div>
</div>

<audio id="background-music" loop>
    <source src="UNDER_YOUR_SPELL.mp3" type="audio/mpeg">
</audio>

<script src="https://cdn.jsdelivr.net/npm/tsparticles@2.9.3/tsparticles.bundle.min.js"></script>
<script src="app.js"></script>
</body>
</html>
